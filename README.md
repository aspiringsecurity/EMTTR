# About

EMTTRs: Electronic Medicine Trial and Test Records as a Service for Secure, Transparent Drug Testing Pipeline. Developer Tools to enable medical trial testing, clinical trials via Electronic Medicine Trial and Test Records as a Service, Electronic Health Records, Open Source Radiology platform & solutions, Web3 eco-system tools.



Website: https://sites.google.com/view/emttrservice/

Pitch Video at Encode Metaverse Hackathon 2022: https://www.youtube.com/watch?v=aIq3JiTlNVA


# Grants and Notable Achievements 

Grant Recipient for Nomination in Tooling and Utilities segment at Optimism Retroactive Public Goods Funding Round 2: https://optimism.mirror.xyz/Upn_LtV2-3SviXgX_PE_LyA7YI00jQyoM1yf55ltvvI?rpgf=2 (please visit shorturl.at/hqESZ)

Optimism Prize Achievement: https://medium.com/encode-club/metaverse-hackathon-prizewinners-and-summary-5d12353cc214 ; https://optimistic.etherscan.io/tx/0x94822e1a9953a5a3c67b51c4f2c2a300cca19103cf85e8761651ad0c54fe3421 

Filecoin Prize Achievement: Filecoin prize winner at Chainlink Fall hackathon 2022; EVM Ideathon Runner-Up 2022 (Government and Public Goods in Healthcare)

Other key achievements: Runner-up at HealthChainhack, Boston ($6000 credits recipient); Young Scientist Award in Healthcare at India International Science Festival; Get in the Ring startup winner from India. 

Documentation and Pitch Deck, Supporting demos: https://drive.google.com/drive/u/4/folders/1Mlcb3gKfyNxYpmgCkIo8ZvJCdJuQ8T0a

Screencasts: 
1. EMTTR Demo Video for anonymization and encryption of medical data and dapp on decentralized medical counseling (dapp, security): https://www.youtube.com/watch?v=rJRRlaVQSMY
2. EMTTR Demo Video for bulk query, retrieve of medical data & dapp using OP, Eth, Embark, IPFS (dapp, portal): https://www.youtube.com/watch?v=BUiVvhuUdrE

Web3 Dev Tooling: Web3 low code modules using wiki like spreadsheet with ionic framework, open source Web3 automation utilities for DICOM data management, visualization, tabulation, organization, graphing and collaboration, anonymization of data using PyDICOM library.

# Summary 

Enabling the bottom of pyramid through empowering pharma companies and the medical eco-system to do medicine trial testing and clinical trials via blockchain and IPFS enabled EMTTRs(Electronic Medicine Trial and Test Records as a Service), EHR and Radiology services on the decentralized cloud, Optimism, Ethereum, Embark, Filecoin and IPFS eco-system tools. EMTTRs as a service aims at providing

■ Secure data storage, transparent data movement and data authenticity using Optimism, Ethereum, Filecoin and IPFS eco-system tools.

■ Improving Data Transparency in Drug Testing Using Optimism, Ethereum Blockchain and Filecoin perpetual storage.

■ Enabling healthcare community by empowering pharma companies & the medical eco-system to do medicine trial testing securely, transparently using smart contracts compiled on EVM and FVM.

■ Developer Tools to enable medical trial testing, clinical trials via EMTTRs (Electronic Medicine Trial and Test Records as a Service) and EHR and Radiology services.


# Features

Just in Time Service: Availability of pharma companies medicine records across differentstakeholder through secure Ethereum, Optimism and Filecoin eco-system tools.

• Record Management: Quality documentation reduces the issues regarding testing proceduresand standardization.• Research: Enabling the healthcare community by empowering pharma companies & the medical eco-system to do medicine trial testing securely, transparently.

• Data Security: Efficiently sharing of data (including personal data), privacy concerns andpatient enrollment strategies.

• Transparency: Improving Data Transparency in Drug Testing Using Ethereum, Optimism Blockchain, Filecoin and IPFS eco-system tools.

A greater and more seamless flow of information within a digital drug discovery infrastructure,created by electronic medicine trial and test records as a service (EMTTRs), encompasses andleverages digital progress and can transform the way medicines are developed, tested anddistributed to improve the global health economy and achievement of Sustainable DevelopmentGoals in Healthcare.

![Eco-system Benefits](https://github.com/aspiringsecurity/EMTTR/blob/main/EHRs/benefits.png)

# BlockChain Eco-system

# Optimism

## Optimism User Interaction 

Our users will interact with Optimism in the following ways:

1. Optimism NFT marketplace for DICOM images for research organizations and radioligists: Improving Data Transparency in Drug Testing Using Ethereum Blockchain and Optimism NFT marketplace. Sharing a smart contract for creating NFT in Optimism by one of our collaborators in Optimism Bedrock Goerli testnet: https://goerli-optimism.etherscan.io/address/0x1d807750029b3b345052b155123908968298bb9e

EthGlobal Community: https://twitter.com/ETHGlobal/status/1637180703413530632

2. Optimism TestXLS: Patient’s visit and Diagnosis Tooling with ionic framework within OP NFT marketplace.

3. OP MED: Low code framework tool for Medication Log. Secure data storage, transparent data movement and data authenticity using OP low code tooling.

4. Giving free Optimism transactions to medical volunteers sharing anonymized report data: We are extending OpenGSN to enable 0 Optimism transaction fees for medical volunteers sharing anonymized report data using PyDICOM open source library.

5. Tracing Optimism transactions to improve user retention and detect, analyze issues in real-time: We are extending Tenderly to trace optimism transactions in DICOM NFT marketplace for enabling data authenticity and transparency.

6. Attestation Hub Contract for Medical Reports: We are extending the AttestationStation smart contract to develop the Attestation Hub smart contract for Medical Reports. We look forward to enabling patients to use OP for all their medi-claim transaction needs and collaborating with Third Party administrators.


## Optimism Modules for Developer Tooling and Utilities, References

1. Optimism NFT marketplace for DICOM (radiology) images for OP developers, research organizations & radioligists: Improving Data Transparency in Drug Testing Using Ethereum Blockchain and Optimism NFT marketplace. Please visit https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/dicom-optimism-marketplace

Sharing a smart contract for creating NFT in Optimism by one of our collaborators in Optimism Bedrock Goerli testnet: https://goerli-optimism.etherscan.io/address/0x1d807750029b3b345052b155123908968298bb9e 

2. Optimism TestXLS: Patient’s visit and Diagnosis Tooling with ionic framework within OP NFT marketplace. Please visit: OP Testxls: https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/dicom-optimism-marketplace/OP-testxls

3. OP MED:  Low code framework tool for Medication Log. Secure data storage, transparent data movement and data authenticity using OP low code tooling. Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/free-OP-transactions-data-volunteers/OP-xls

4. Giving free Optimism transactions to medical volunteers sharing anonymized report data: We are extending OpenGSN to enable 0 Optimism transaction fees for medical volunteers sharing anonymized report data using PyDICOM open source library. Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/free-OP-transactions-data-volunteers

5. Tracing Optimism transactions to improve user retention and detect, analyze issues in real-time: We are extending Tenderly to trace optimism transactions in DICOM NFT marketplace. We area also integrating with an open source spreadsheet maintained by us for analytics, visualization, tabulation, organization of the issues: please visit https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/optimism-transaction-trace. 

6. Attestation Hub Contract for Medical Reports: https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/OP-attest-medical-reports-hub
We are extending the AttestationStation smart contract to develop the Attestation Hub smart contract for Medical Reports


# IPFS and Filecoin eco-system, Ethereum, Embark, Status

1b. FVM enables us to use composable blocks exposed through standardized interfaces, enabling the construction of picture archiving and medical imaging solutions. This improves better outcomes for drug testing, counseling (https://sites.google.com/view/fevm-med/home?authuser=8 ), precision medicine. Links: https://youtu.be/BUiVvhuUdrE (dapp, security), https://youtu.be/BUiVvhuUdrE (dapp, portal).

Please visit DataDAO for DICOM image and patient metadata in FVM Medicine solution: https://github.com/aspiringsecurity/EMTTR/tree/main/fvm-dicom-data-dao

We are generating NFTs for NFC tags of practice license of TPAs and pharma professionals involved in bulk query and retrieve operation of DICOM images. Please find the repository for NFT generation on FVM for NFC tags of TPAs and pharma professionals at https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/dicom-optimism-marketplace/nfc-tag-nft-fvm

Medical History Journal using IPFS: https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/ehrs-medical-history-module

FVM Analytics and Developer Tooling for Invoice to Cash automation using Intel oneapi, medical billing and invoicing: https://github.com/aspiringsecurity/EMTTR/tree/main/Quotation-dapp-contract-management/medical-invoice-to-cash-automation-oneapi

IPFS Chainlink Monitor: Workflow tool using ethereum blockchain network, store on IPFS/Filecoin via NFT.Storage, Chainlink for storing offchain billing metadata, Chainlink Data Feeds and automation for TPA claims and payments. Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/Quotation-dapp-contract-management/IPFS-Chainlink-Monitor


1c. Chainlink: Workflow tool using ethereum blockchain network, store on IPFS/Filecoin via NFT.Storage, Chainlink for storing offchain metadata, Chainlink Data Feeds and automation for TPA claims and payments. Please visit https://github.com/aspiringsecurity/EMTTR/tree/main/Quotation-dapp-contract-management/IPFS-Chainlink-Monitor

We are utilizing Chainlink VRF as follows:

Research Contract Bill Generation: We are utilizing Chainlink Mix to work with Chainlink smart contracts. The bill script will deploy a smart contract to goerli and get a Random number via Chainlink VRF, which can used to identify a unique transaction/order number for the research contract bill.

Parametric Insurance Solution for medicine discovery with special procedures. We are utilizing an existing example at chainlink github repo to develop an insurance solution for contract researchers. Link: https://github.com/aspiringsecurity/EMTTR/tree/main/Quotation-dapp-contract-management/Chainlink-VRF


1d. Klaytn Monitor:  DeFi dashboard for CROs to undertake research in drug design.

Secure data storage, transparent data movement and data authenticity using Klaytn dashboard. Please visit https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/klaytn-monitor 


1e. Aleo network: Quotation, Bidding, voting and token management for contract work undertaken by CROs from pharmaceutical companies on Aleo Network.

Aleo's Quotation, Bidding, voting and token management for contract work undertaken by CROs: https://github.com/aspiringsecurity/EMTTR/tree/main/Quotation-dapp-contract-management/aleo-bid-quotation-vote-workflow

2. MultiChain: MultiChain Webapp integration with EtherCalc for analysis, tabulation, graphing, charting and visualization. Please visit the link at https://github.com/aspiringsecurity/EMTTR/tree/main/nft-dao-l2-scaling-multichain/multichain-webapp

3. Polygon, Fantom (TradeFi meets Defi) and Axelar: Axelar for communication between Polygon blockchain (pharmaceutical companies and Contract research organizations) and Fantom destination chain (compliance system by government organizations like Ministry of Healthcare or Ministry of Commerce). Please visit https://github.com/aspiringsecurity/EMTTR/tree/main/messaging . Polygon audit smart contracts at https://github.com/aspiringsecurity/EMTTR/tree/main/Quotation-dapp-contract-management/Audit-Polygon

4. XDC blockchain network: Borrowing XDC funds using collaterals for drug design research and development. Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/EHRs/xdc-borrow-funds


Blockchain Communication: Axelar for communication between Polygon blockchain and Fantom destination chain, MultiChain. Covalent endpoint for aggregated view (please visit Covalent-NFT-Dashboard which enables us to analyze, observe all NFTs from wallet address in different networks. Links at the bottom of the readme section)

Moralis deployment URL: https://3gtivnurtulj.usemoralis.com:2053/server (to be deployed)

Improving Data Transparency in Drug Testing Using Blockchain Smart Contracts

Package contents
================

src/Regulator.sol - the solidity smart contract code for the Regulator contract

src/ClinicalTrial.sol - the solidity code smart contract code for the a Clinical Trial contract

src/start-ethereum-node.sh - script to start a local Ethereum node

src/workflow.js - the main nodejs script that interacts with the blockchain

src/run-workflow.sh - script that will execute the workflow steps

src/read-from-blockchain.sh - script that reads trial data from the blockchain

logs/run-workflow.log - output from running src/run-workflow.sh

logs/read-from-blockchain.log - output from running src/read-from-blockchain.sh

Getting started
===============

Code is written using Bash and Javascript - you will need to install nodejs:

https://nodejs.org

We use the testrpc npm module in order to reproduce the exact conditions the workflow scripts need to run the tests. It is important that you reset the blockchain every time you run through these steps. In order to reset, just restart the start-ethereum-node.sh script.

Running the scripts
===================

The steps needed are as follows:

1) Run 'npm install' to install all dependencies mentioned in package.json

2) Install 'testrpc' as a global npm module

npm install -g ethereumjs-testrpc

3) Run the script to start a local Ethereum node

./start-ethereum-node.sh

4) In another terminal, run the script that will execute the workflow steps

./run-workflow.sh

This script will:

	-Deploy a Regulator smart contract
	
	-Add a CRO/pharma to this contract - in this case Roche
	
	-Upload the trial protocol (data/TrialProtocol.pdf) to IPFS, running locally
	
	-Deploy a Clinical Trial smart contract - in this case for Tamiflu, including the IPFS hash linking to the protocol
	
	-Add 500 subjects to the trial
	
	-Add 5 data points for each subject

5) Run the script to read data from the blockchain contracts

./read-from-blockchain.sh

...............................
blockNumber= 3005

drug name= Tamiflu

ipfs hash= QmTZKpCqqFcUsmXWzffmLkYNCwrYkTvhkAXdquzNWij1z4

number of subjects= 501

patient ident= s0/1985-04-03

patient ident= s1/2006-4-1
	 
	 data=  44/mg/89/NONE added at 2016-10-04T16:14:49+01:00
	 
	 data=  50/mg/68/NAUSEA added at 2016-10-04T16:14:49+01:00
	 
	 data=  27/mg/44/HEARTBURN added at 2016-10-04T16:14:49+01:00
	 
	 data=  42/mg/33/COMA added at 2016-10-04T16:14:49+01:00
	 
	 data=  96/mg/54/HEADACHE added at 2016-10-04T16:14:49+01:00

patient ident= s2/2007-5-13

	 data=  10/mg/29/COMA added at 2016-10-04T16:14:49+01:00
	 
	 data=  79/mg/44/NAUSEA added at 2016-10-04T16:14:49+01:00
	 
	 data=  53/mg/21/HEADACHE added at 2016-10-04T16:14:49+01:00
	 
...............................

6) Log files for these scripts can be found in logs directory


# Supporting Eco-system

1. Covalent End Point: Covalent-NFT-Dashboard enables us to analyze, observe all NFTs from wallet address of Contract Research Organizations (CROs), pharmaceutical companies in different networks. Please visit https://github.com/aspiringsecurity/EMTTR/tree/main/covalent-nft-dashboard

EthMed Covalent Dashboard: We are developing a Contract Research DAO platform using Covalent that enables healthcare providers, contract researchers and aggregators and pharma organizations to keep track of all the details of their medicine assets, trial budgets, DeFi investments, transactions, and assets across all multiple chains and also displays DAO data using a data visualization chart. We are building our solution on top of an existing web3 dashboard system and are planning to integrate it with an analytics, tabulation and collaboration tool namely EtherCalc. Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/covalent-nft-dashboard/advance-dashboard


2. Covalent Dashboard: We are developing a Contract Research DAO platform using Covalent that enables healthcare providers, contract researchers and aggregators and pharma organizations to keep track of all the details of their medicine assets, trial budgets, DeFi investments, transactions, and assets across all multiple chains and also displays DAO data using a data visualization chart. We are building our solution on top of an existing web3 dashboard system and are planning to integrate it with an analytics, tabulation and collaboration tool namely EtherCalc. Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/covalent-nft-dashboard/advance-dashboard

3. Experiments on scaling with other Layer 2 protocols for Security, voting and DAO management, contract payment management. Developing L2 solutions with focus on interoperability with Optimism blockchain:

- zkync: We are utilizing zkysync layer 2 tooling for account abstraction, encryption tooling: please visit 

- https://github.com/aspiringsecurity/EMTTR/tree/main/nft-dao-l2-scaling-multichain/zksync-account-abstraction-emttr
- https://github.com/aspiringsecurity/EMTTR/tree/main/nft-dao-l2-scaling-multichain/hardhat-zksync


- AltLayer: CRO contract payment Management and Amount Distribution on Altlayer. Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/nft-dao-l2-scaling-multichain/altlayer-contract-amount-distribution


- Metis: Decentralized NFT-based voting system for RFPs on Metis network. Workflow:

-DAOs or Organisations create a RFP on the app.
-Users can join a RFP by minting an NFT of that RFP
- Users that have a certain RFP's NFT are eligible to create proposals and vote on them.
- Voting is gasless and the vote is stored on IPFS

Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/nft-dao-l2-scaling-multichain/metis-voting-nfts-daos


- Boba network: Hybrid-Compute for Medical Research University on the Boba Network. Please visit: https://github.com/aspiringsecurity/EMTTR/tree/main/nft-dao-l2-scaling-multichain/med-scaling-using-hybrid-compute-boba







